pipeline {
    agent any

    stages {
        stage('Create Properties File') {
            steps {
                script {
                    def propertiesContent = """
                    APP_NAME=MyApp
                    VERSION=1.0.0
                    ENVIRONMENT=dev
                    DB_URL=jdbc:mysql://localhost:3306/mydb
                    """
                    writeFile file: 'params.properties', text: propertiesContent
                    echo "Properties file created."
                }
            }
        }

        stage('Read Properties Manually') {
            steps {
                script {
                    def props = [:]
                    def fileContent = readFile 'params.properties'
                    fileContent.eachLine { line ->
                        def keyValue = line.tokenize('=')
                        if (keyValue.size() == 2) {
                            props[keyValue[0].trim()] = keyValue[1].trim()
                        }
                    }
                    echo "Application Name: ${props.APP_NAME}"
                    echo "Version: ${props.VERSION}"
                    echo "Environment: ${props.ENVIRONMENT}"
                    echo "Database URL: ${props.DB_URL}"
                }
            }
        }
    }
}
